<template>
	<div class="listview-dark">
		<div class="form-container gap">
			<div class="form-container" style="min-width: 90px; max-width: 90px;">
				<div class="title-dark" style="text-align: left; word-break: break-all;">{{ title }}
				</div>
			</div>
			<div class="form-container gap">
				<div class="button-dark flex" :class="{'selected': is_DragOver}" style="justify-content: center;"
					@dragover.prevent @drop="filedrop()" @dragenter.capture="is_DragOver = true"
					@dragleave.capture="is_DragOver = false" :title="itemvalue.path">
					<div style="display: flex; pointer-events: none;" v-html="iconMap[get_FileType]"></div>
					<div class="button-text">{{(itemvalue.path === '')?
						'空':get_FileName}}</div>
				</div>
				<div v-if="itemvalue.path!==''" class=" button-dark" @click="delete_Path()">
					<svg class="button-icon-svg" viewBox="0 0 114 114" xmlns="http://www.w3.org/2000/svg"
						xmlns:xlink="http://www.w3.org/1999/xlink" overflow="hidden">
						<g transform="translate(-252 -261)">
							<path
								d="M340.25 288.833 322.542 288.833 322.542 283.625C322.542 279.563 319.313 276.333 315.25 276.333L302.75 276.333C298.688 276.333 295.458 279.563 295.458 283.625L295.458 288.833 277.75 288.833C275.458 288.833 273.583 290.708 273.583 293L273.583 297.167 344.417 297.167 344.417 293C344.417 290.708 342.542 288.833 340.25 288.833ZM301.708 283.625C301.708 283 302.125 282.583 302.75 282.583L315.25 282.583C315.875 282.583 316.292 283 316.292 283.625L316.292 288.833 301.708 288.833 301.708 283.625Z" />
							<path
								d="M279.833 355.5C279.833 357.792 281.708 359.667 284 359.667L334 359.667C336.292 359.667 338.167 357.792 338.167 355.5L338.167 301.333 279.833 301.333 279.833 355.5ZM322.542 307.583 328.792 307.583 328.792 353.417 322.542 353.417 322.542 307.583ZM305.875 307.583 312.125 307.583 312.125 353.417 305.875 353.417 305.875 307.583ZM289.208 307.583 295.458 307.583 295.458 353.417 289.208 353.417 289.208 307.583Z" />
						</g>
					</svg>
				</div>
			</div>
		</div>
	</div>
</template>
<script>
	import { ICONMAP } from '../Utils.js'

	export default {
		name: 'IC_FileDrop',
		props: {
			uid: {
				type: String,
				default: "none"
			},
			title: {
				type: String,
				default: "未命名项"
			},
			itemvalue: {
				type: Object,
				default: () => {
					return {
						path: '',
						accept: []
					}
				}
			},
			action: {
				type: String,
				default: "未定"
			}
		},
		data() {
			return {
				is_DragOver: false,
				iconMap: {
					pole: '<svg class="icon-dark" viewBox="0 0 1447 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" ><path d="M598.200767 1011.094488L11.885832 672.584025c-17.568695-10.144043-15.368135-27.873754 4.91995-39.57429l764.166661-441.203241c20.288085-11.718427 50.988575-12.988668 68.55727-2.844626l586.314935 338.510463c17.568695 10.144043 15.368135 27.873754-4.91995 39.592181l-764.166662 441.18535c-20.288085 11.718427-50.988575 12.988668-68.557269 2.844626z" fill="#8F95AB" p-id="7742"></path><path d="M598.200767 952.681261L11.885832 614.170798c-17.568695-10.144043-15.368135-27.873754 4.91995-39.592181l764.166661-441.18535C801.260529 121.65695 831.943127 120.404599 849.529713 130.602314l586.314935 338.45679c17.568695 10.144043 15.368135 27.873754-4.91995 39.57429L666.758036 949.836635c-20.288085 11.718427-50.988575 12.988668-68.557269 2.844626z" fill="#ADB8D0" p-id="7743"></path><path d="M598.200767 890.833015L11.885832 552.322552C-5.682863 542.089056-3.553866 524.448798 16.805782 512.730371L780.972443 71.562912c20.288085-11.718427 50.988575-12.988668 68.55727-2.844626l586.314935 338.492572c17.568695 10.144043 15.368135 27.855863-4.91995 39.57429L666.758036 887.988389c-20.288085 11.700536-50.988575 12.988668-68.557269 2.844626z" fill="#C7CEE2" p-id="7744"></path><path d="M598.200767 828.966878L11.885832 490.456415C-5.682863 480.312372-3.553866 462.600551 16.805782 450.846343L780.972443 9.696775c20.288085-11.718427 50.988575-12.988668 68.55727-2.844626L1435.844648 345.291049c17.568695 10.144043 15.368135 27.855863-4.91995 39.57429L666.758036 826.122252c-20.288085 11.718427-50.988575 12.952887-68.557269 2.844626z" fill="#F5F8FC" p-id="7745"></path><path d="M877.439248 416.156222L544.6896 224.027695l211.951453-122.372579 332.76754 192.128527-211.969345 122.372579z" fill="#D7DEED" p-id="7746"></path><path d="M1230.154949 421.541331l-118.526072-68.432034a14.813523 14.813523 0 0 1 0-25.655304 14.813523 14.813523 0 0 1 14.813522 0l118.526073 68.432034a14.813523 14.813523 0 0 1 0 25.655304 14.813523 14.813523 0 0 1-14.813523 0zM1166.338723 459.254985l-118.526073-68.432034a14.813523 14.813523 0 0 1 0-25.655304 14.813523 14.813523 0 0 1 14.813523 0l118.526072 68.432035a14.813523 14.813523 0 0 1 0 25.655303 14.813523 14.813523 0 0 1-14.813522 0zM980.883437 569.300853l-491.995017-284.068978a14.813523 14.813523 0 0 1 0-25.655304 14.813523 14.813523 0 0 1 14.813522 0l491.995018 284.051087a14.831413 14.831413 0 0 1 0 25.673195 14.813523 14.813523 0 0 1-14.813523 0zM462.642722 355.631889l-47.839807-27.641174a14.795632 14.795632 0 0 1 0-25.655304 14.813523 14.813523 0 0 1 14.813523 0l47.839806 27.623284a14.831413 14.831413 0 0 1 0 25.673194 14.885086 14.885086 0 0 1-14.813522 0zM905.527691 610.073822L511.699098 382.611107a14.831413 14.831413 0 0 1 0-25.673195 14.885086 14.885086 0 0 1 14.813522 0l393.828594 227.409043a14.813523 14.813523 0 0 1 0 25.655304 14.813523 14.813523 0 0 1-14.813523 0.071563zM832.730319 654.800641l-491.995017-284.068977a14.831413 14.831413 0 0 1 0-25.673195 14.885086 14.885086 0 0 1 14.813523 0l491.995017 284.068978a14.831413 14.831413 0 0 1 0 25.673194 14.831413 14.831413 0 0 1-14.813523 0zM658.653537 637.231947L268.92192 412.220262a14.831413 14.831413 0 0 1 0-25.673195 14.813523 14.813523 0 0 1 14.813523 0l389.731616 225.011685a14.831413 14.831413 0 0 1 0 25.673195 14.885086 14.885086 0 0 1-14.813522 0zM722.255074 673.94372l37.248496 21.468874a14.813523 14.813523 0 0 0 14.813523 0 14.813523 14.813523 0 0 0 0-25.655304l-37.266387-21.468874a14.813523 14.813523 0 0 0-14.813522 0 14.813523 14.813523 0 0 0 0.01789 25.655304zM679.87194 737.634712L192.564293 456.303015a14.831413 14.831413 0 0 1 0-25.673194 14.831413 14.831413 0 0 1 14.831414 0L694.685463 712.050971a14.813523 14.813523 0 0 1 0 25.655304 14.813523 14.813523 0 0 1-14.813523-0.071563zM1043.500985 467.287922l-64.066697-36.980134a14.831413 14.831413 0 0 1 0-25.673195 14.885086 14.885086 0 0 1 14.813523 0l64.066696 36.998025a14.813523 14.813523 0 0 1 0 25.655304 14.813523 14.813523 0 0 1-14.813522 0z" fill="#C7CEE2" p-id="7747"></path></svg>',
					txt: '<svg class="icon-dark" viewBox="-150 -150 1324 1324" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M981.333333 276.053333V981.333333a42.666667 42.666667 0 0 1-42.666666 42.666667H85.333333a42.666667 42.666667 0 0 1-42.666666-42.666667V42.666667a42.666667 42.666667 0 0 1 42.666666-42.666667h619.946667z" fill="#4C98FC" p-id="11324"></path><path d="M705.28 233.386667V0L981.333333 276.053333H747.946667a42.666667 42.666667 0 0 1-42.666667-42.666666z" fill="#A5D1FD" p-id="11325"></path><path d="M167.04 489.386667m26.666667 0l160 0q26.666667 0 26.666666 26.666666l0 0q0 26.666667-26.666666 26.666667l-160 0q-26.666667 0-26.666667-26.666667l0 0q0-26.666667 26.666667-26.666666Z" fill="#FFFFFF" p-id="11326"></path><path d="M300.373333 542.72v229.333333a26.666667 26.666667 0 0 1-26.666666 26.666667 26.666667 26.666667 0 0 1-26.666667-26.666667V542.72h53.333333z" fill="#FFFFFF" p-id="11327"></path><path d="M653.866667 489.386667m26.666666 0l160 0q26.666667 0 26.666667 26.666666l0 0q0 26.666667-26.666667 26.666667l-160 0q-26.666667 0-26.666666-26.666667l0 0q0-26.666667 26.666666-26.666666Z" fill="#FFFFFF" p-id="11328"></path><path d="M787.2 542.72v229.333333a26.666667 26.666667 0 0 1-26.666667 26.666667 26.666667 26.666667 0 0 1-26.666666-26.666667V542.72h53.333333z" fill="#FFFFFF" p-id="11329"></path><path d="M430.43932 531.537782m18.856181 18.856181l173.476863 173.476863q18.856181 18.856181 0 37.712362l0 0q-18.856181 18.856181-37.712361 0l-173.476864-173.476864q-18.856181-18.856181 0-37.712361l0 0q18.856181-18.856181 37.712362 0Z" fill="#FFFFFF" p-id="11330"></path><path d="M392.650461 742.693177m18.856181-18.856181l173.476864-173.476863q18.856181-18.856181 37.712361 0l0 0q18.856181 18.856181 0 37.712361l-173.476863 173.476864q-18.856181 18.856181-37.712362 0l0 0q-18.856181-18.856181 0-37.712362Z" fill="#FFFFFF" p-id="11331"></path></svg>',
					svg: '<svg class="icon-dark" viewBox="-50 -50 1124 1124" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M661.15 72L860 261.81V952H164V72h497.15M666 0H152a60 60 0 0 0-60 60v904a60 60 0 0 0 60 60h720a60 60 0 0 0 60-60V256.67a60 60 0 0 0-18.57-43.4L707.39 16.6A60 60 0 0 0 666 0z" fill="#959CA7" p-id="3184"></path><path d="M530 284H288a36 36 0 1 1 0-72h242a36 36 0 0 1 0 72zM896 295H684a36 36 0 0 1-36-36V47a36 36 0 0 1 72 0v176h176a36 36 0 1 1 0 72zM530 416H288a36 36 0 1 1 0-72h242a36 36 0 0 1 0 72z" fill="#959CA7" p-id="3185"></path><path d="M92 555m20 0l582 0q20 0 20 20l0 276q0 20-20 20l-582 0q-20 0-20-20l0-276q0-20 20-20Z" fill="#3C87F7" p-id="3186"></path><path d="M152.27 753.42h38.55q0.83 11.53 10.74 19.35t26.93 7.83q16.33 0 25.25-6.82a21.78 21.78 0 0 0 8.93-18.22q0-9.57-6.93-15t-21.91-8.79l-28.43-6.52a87.11 87.11 0 0 1-19-6.18 61 61 0 0 1-15.32-10.21 42.44 42.44 0 0 1-10.68-15.55 54.84 54.84 0 0 1-3.81-21q0-18 9.65-31.29A58.26 58.26 0 0 1 192 621.19q16.1-6.58 36.37-6.58 31.53 0 51.09 15.74t19.84 41H262a26.18 26.18 0 0 0-9.55-18.43q-8.72-7.5-24.21-7.5-14.53 0-23 6.41t-8.44 17.4q0 16.57 25.68 21.86l28.69 6.44a98.26 98.26 0 0 1 19.77 6.23 67.87 67.87 0 0 1 16 10.08 40.34 40.34 0 0 1 11.34 15.82 58.1 58.1 0 0 1 3.94 22.2q0 27.65-20.26 43.6t-55.38 16a111.57 111.57 0 0 1-29-3.47q-12.88-3.46-21.14-9.15a55.91 55.91 0 0 1-13.8-13.38 52.27 52.27 0 0 1-7.9-15.6 60.32 60.32 0 0 1-2.47-16.44zM313.71 618.5h46.46l40.49 144.77h1.66l39.94-144.77h44.93l-62.27 189.28H376zM495.65 724.3v-23.57q0-39.38 21.78-62.61t60-23.23a92.77 92.77 0 0 1 32.74 5.48q14.63 5.48 23.75 14.63A67.21 67.21 0 0 1 648 655.59a64.73 64.73 0 0 1 5.43 24.06h-39.36q-1.81-14.76-11.88-23.12t-25.35-8.36q-18.76 0-29.87 13.27T535.86 701v23.21q0 24.88 10.07 39.4t31.32 14.52q17.23 0 27.64-9.37a29.89 29.89 0 0 0 10.42-23.15V735h-36.74v-29.83h75.16v37.44a74 74 0 0 1-2.44 18.86 64.82 64.82 0 0 1-8.29 18.44A66.36 66.36 0 0 1 628.52 796q-8.64 6.94-22 11.16a98.57 98.57 0 0 1-29.81 4.23q-20.61 0-36.31-6.52A63.45 63.45 0 0 1 515 786.5a80.64 80.64 0 0 1-14.51-27.5 117 117 0 0 1-4.84-34.7z" fill="#FFFFFF" p-id="3187"></path></svg>',
					stl: '<svg class="icon-dark" viewBox="-50 -50 1124 1124" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M156.01854658 328.14285752l-1.28571416 0.64285664v364.5l357.42857168 187.71428584V505.89285752L156.01854658 328.14285752z" fill="#ffffff" p-id="3982"></path><path d="M868.62568994 328.46428584l-356.78571416-187.71428584-342.3214292 180-13.82142832 7.39285752 356.14285752 177.75 4.1785708-1.92857168 353.5714292-174.85714336z m-353.57142832 175.5l-4.17857168 3.21428584z" fill="#f9f28b" p-id="3983"></path><path d="M939.98283242 294.07142832a61.71428584 61.71428584 0 0 0-25.39285664-26.6785708L539.16140411 68.75a58.82142832 58.82142832 0 0 0-54.64285753 0L109.4114041 266.10714248a53.03571416 53.03571416 0 0 0-15.42857168 13.8214292 59.46428584 59.46428584 0 0 0-9.64285664 12.53571416A55.28571416 55.28571416 0 0 0 77.26854658 319.14285752v385.71428496a59.14285752 59.14285752 0 0 0 32.14285753 52.0714292l374.78571415 197.35714248a64.28571416 64.28571416 0 0 0 26.67857168 7.71428584h4.5a61.71428584 61.71428584 0 0 0 22.82142832-6.10714248l374.78571416-198.32142919a59.78571416 59.78571416 0 0 0 32.14285752-52.71428585V319.14285752a57.21428584 57.21428584 0 0 0-5.14285752-25.0714292z m-70.39285664 35.03571416l-353.5714292 174.85714336-4.1785708 2.25v375.10714248L154.08997578 693.28571416V328.78571416l13.82142832-7.39285664 343.92857168-180.64285752 356.78571416 187.71428584z" fill="#e98f36" p-id="3984"></path></svg>'
				}
			}
		},
		computed: {
			get_FileName: function () {
				return this.itemvalue.path.split('/').slice(-1)[0]
			},
			get_FileType: function () {
				let type = (this.itemvalue.path.split('/').slice(-1)[0]).split('.').slice(-1)[0]
				return type
			}
		},
		watch: {
		},
		methods: {
			dragover() {
			},
			filedrop() {
				this.is_DragOver = false
				let data = event.dataTransfer.getData("FileDragData")
				if (data !== '') {
					let item = JSON.parse(data)
					if (this.itemvalue.accept.includes(item.filetype) && this.itemvalue.path !== item.path) {
						this.$emit('datachange', this.action, item)
					}
				}
			},
			delete_Path() {
				this.$emit('datachange', this.action, null)
			}
		},
		mounted() {
		}
	}
</script>
<style>
</style>